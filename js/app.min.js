(()=>{"use strict";const e=document.querySelectorAll("[data-spollers]");if(e.length>0){const v=Array.from(e).filter((function(e,t,n){return!e.dataset.spollers.split(",")[0]}));v.length>0&&L(v);const h=Array.from(e).filter((function(e,t,n){return e.dataset.spollers.split(",")[0]}));if(h.length>0){const _=[];h.forEach((e=>{const t={},n=e.dataset.spollers.split(",");t.value=n[0],t.type=n[1]?n[1].trim():"max",t.item=e,_.push(t)}));let E=_.map((function(e){return"("+e.type+"-width: "+e.value+"px),"+e.value+","+e.type}));E=E.filter((function(e,t,n){return n.indexOf(e)===t})),E.forEach((e=>{const t=e.split(","),n=t[1],o=t[2],s=window.matchMedia(t[0]),i=_.filter((function(e){if(e.value===n&&e.type===o)return!0}));s.addListener((function(){L(i,s)})),L(i,s)}))}function L(e,t=!1){e.forEach((e=>{e=t?e.item:e,t.matches||!t?(e.classList.add("_init"),w(e),e.addEventListener("click",A)):(e.classList.remove("_init"),w(e,!1),e.removeEventListener("click",A))}))}function w(e,t=!0){const n=e.querySelectorAll("[data-spoller]");n.length>0&&n.forEach((e=>{t?(e.removeAttribute("tabindex"),e.classList.contains("_active")||(e.nextElementSibling.hidden=!0)):(e.setAttribute("tabindex","-1"),e.nextElementSibling.hidden=!1)}))}function A(e){const t=e.target;if(t.hasAttribute("data-spoller")||t.closest("[data-spoller]")){const o=t.hasAttribute("data-spoller")?t:t.closest("[data-spoller]"),s=o.closest("[data-spollers]"),i=!!s.hasAttribute("data-one-spoller");s.querySelectorAll("._slide").length||(i&&!o.classList.contains("_active")&&b(s),o.classList.toggle("_active"),n(o.nextElementSibling,500)),e.preventDefault(),console.log("так так")}}function b(e){const n=e.querySelector("[data-spoller]._active");n&&(n.classList.remove("_active"),t(n.nextElementSibling,500),console.log("хахаахах"))}}let t=(e,t=500)=>{e.classList.contains("_slide")||(e.classList.add("_slide"),e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout((()=>{e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide")}),t))},n=(e,n=500)=>"none"===window.getComputedStyle(e).display?((e,t=500)=>{if(!e.classList.contains("_slide")){e.classList.add("_slide"),e.hidden&&(e.hidden=!1),e.style.removeProperty("display");let n=window.getComputedStyle(e).display;"none"===n&&(n="block"),e.style.display=n;let o=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=o+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout((()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide")}),t)}})(e,n):t(e,n);document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll("input[data-tel-input]"),t=function(e){return e.value.replace(/\D/g,"")},n=function(e){var n=e.target,o=t(n),s=e.clipboardData||window.clipboardData;if(s){var i=s.getData("Text");if(/\D/g.test(i))return void(n.value=o)}},o=function(e){var n=e.target,o=t(n),s=n.selectionStart,i="";if(!o)return n.value="";if(n.value.length==s){if(["7","8","9"].indexOf(o[0])>-1){"9"==o[0]&&(o="7"+o);var r="8"==o[0]?"8":"+7";i=n.value=r+" ",o.length>1&&(i+="("+o.substring(1,4)),o.length>=5&&(i+=") "+o.substring(4,7)),o.length>=8&&(i+="-"+o.substring(7,9)),o.length>=10&&(i+="-"+o.substring(9,11))}else i="+"+o.substring(0,16);n.value=i}else e.data&&/\D/g.test(e.data)&&(n.value=o)},s=function(e){var t=e.target.value.replace(/\D/g,"");8==e.keyCode&&1==t.length&&(e.target.value="")};for(var i of e)i.addEventListener("keydown",s),i.addEventListener("input",o,!1),i.addEventListener("paste",n,!1)}));const o=document.querySelectorAll("._anim-items");if(o.length>0){function S(e){for(let e=0;e<o.length;e++){const t=o[e],n=t.offsetHeight,s=P(t).top,i=4;let r=window.innerHeight-n/i;n>window.innerHeight&&(r=window.innerHeight-window.innerHeight/i),pageYOffset>s-r&&pageYOffset<s+n?t.classList.add("_active"):t.classList.contains("_anim-no-hide")||t.classList.remove("_active")}}function P(e){const t=e.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,o=window.pageYOffset||document.documentElement.scrollTop;return{top:t.top+o,left:t.left+n}}window.addEventListener("scroll",S),setTimeout((()=>{S()}),300)}const s=document.querySelectorAll(".popup-link"),i=document.querySelector("body"),r=document.querySelectorAll(".lock-padding");let l=!0;if(s.length>0)for(let k=0;k<s.length;k++){const q=s[k];q.addEventListener("click",(function(e){const t=q.getAttribute("href").replace("#","");c(document.getElementById(t)),e.preventDefault()}))}const a=document.querySelectorAll(".close-popup");if(a.length>0)for(let x=0;x<a.length;x++){const D=a[x];D.addEventListener("click",(function(e){d(D.closest(".popup")),e.preventDefault()}))}function c(e){if(e&&l){const t=document.querySelector(".popup.open");t?d(t,!1):function(){const e=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";if(r.length>0)for(let t=0;t<r.length;t++)r[t].style.paddingRight=e;i.style.paddingRight=e,i.classList.add("lock"),l=!1,setTimeout((function(){l=!0}),300)}(),e.classList.add("open"),e.addEventListener("click",(function(e){e.target.closest(".popup__content")||d(e.target.closest(".popup"))}))}}function d(e,t=!0){l&&(e.classList.remove("open"),t&&(setTimeout((function(){if(r.length>0)for(let e=0;e<r.length;e++)r[e].style.paddingRight="0px";i.style.paddingRight="0px",i.classList.remove("lock")}),300),l=!1,setTimeout((function(){l=!0}),300)))}document.addEventListener("keydown",(function(e){27===e.which&&d(document.querySelector(".popup.open"))})),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("form");function t(e){e.parentElement.classList.add("_error"),e.classList.add("_error")}function n(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}function o(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}e.addEventListener("submit",(async function(s){s.preventDefault();let i=function(e){let s=0,i=document.querySelectorAll("._req");for(let e=0;e<i.length;e++){const r=i[e];n(r),r.classList.contains("_email")?o(r)&&(t(r),s++):("checkbox"===r.getAttribute("type")&&!1===r.checked||""===r.value)&&(t(r),s++)}return s}(),r=new FormData(e);if(0===i){e.classList.add("_sending");let t=await fetch("sendmail.php",{method:"POST",body:r});if(t.ok){let n=await t.json();alert(n.message),formPreview.innerHTML="",e.reset(),e.classList.remove("_sending")}else e.classList.remove("_sending")}}))}));const u=document.querySelectorAll("img[data-src],source[data-srcset]"),p=(document.querySelector("._load-map"),document.documentElement.clientHeight);let m=[];function f(){let e=m.findIndex((e=>pageYOffset>e-p));e>=0&&(u[e].dataset.src?(u[e].src=u[e].dataset.src,u[e].removeAttribute("data-src")):u[e].dataset.srcset&&(u[e].srcset=u[e].dataset.srcset,u[e].removeAttribute("data-srcset")),delete m[e])}u.length>0&&u.forEach((e=>{(e.dataset.src||e.dataset.srcset)&&(m.push(e.getBoundingClientRect().top+pageYOffset),f())})),window.addEventListener("scroll",(function(){document.querySelectorAll("img[data-src],source[data-srcset]").length>0&&f()})),function(e){let t=new Image;t.onload=t.onerror=function(){!function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}();const g=document.querySelectorAll(".nav_link"),y=document.querySelectorAll(".content");g.forEach((function(e){e.addEventListener("click",(function(){let t=e,n=t.getAttribute("data-tab"),o=document.querySelector(n);t.classList.contains("_active")||(g.forEach((function(e){e.classList.remove("_active")})),y.forEach((function(e){e.classList.remove("_active")})),t.classList.add("_active"),o.classList.add("_active"))}))}))})();